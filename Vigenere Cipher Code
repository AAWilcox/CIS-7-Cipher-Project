#include <bits/stdc++.h>
using namespace std;
#include <iostream>

//Generate Key
string generateKey(string str, string key)
{
  int x = str.size();

  for (int i = 0; ; i++)
  {
    if (x == i)
    i = 0;

    if (key.size() == str.size())
    break;
    key.push_back(key[i]);
  }
  return key;
}

//Encrypt
string cipherText(string str, string key)
{
  string cipher_text;
  int x;
  for (int i = 0; i < str.size(); i++)
  {
    if (isupper(str[i]))
    {   
      x = (str[i] + key[i]) % 26;
      x += 'A';
    }

    if (islower(str[i]))
    {
      x = ((str[i] + key[i] - 12) % 26);
      x += 'a';
    }
    cipher_text.push_back(x);
  }
  return cipher_text;
}

//Decrypt
string originalText(string str, string key)
{
  string orig_text;
  int x;

  for(int i = 0; i < str.size(); i++)
  {

    if (isupper(str[i]))
    {
      x = (str[i] - key[i] + 26)%26;
      x += 'A';
    }

    if (islower(str[i]))
    {
      x = ((str[i] - key[i] + 26)%26);
      x += 'a';
    }

    orig_text.push_back(x);
  }
  return orig_text;
}

int main()
{
  string str;
  string keyword;
  int choice;
  char cont;

  do
  {
  cout << "Input string: " << endl;
  cin >> str;

  cout << "Input keyword: " << endl;
  cin >> keyword;

 cout << "1.) Encrypt\n2.) Decrypt\n";
 cin >> choice;


   if (choice == 1)
   {
  string key = generateKey(str, keyword);
  string cipher_text = cipherText(str, key);

  cout << "Ciphertext: "
  << cipher_text << endl;

  cout << "Original Text: "
  << str;

    }

  else if (choice == 2)
  {
  string key = generateKey(str, keyword);
  string original_text = originalText(str, key);

  cout << "Plaintext: "
  << original_text << endl;

  cout << "Original Text: "
  << str;
  }

  cout << "\n\nDo you want to run the program again?" << endl;
  cin >> cont;
  
  }while(cont == 'Y' || cont == 'y');

  return 0;
}
